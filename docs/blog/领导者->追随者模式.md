---
sidebarDepth: 0
collapsable: false
---

# 领导者/追随者模式

此模式是并发处理模式之一，侧重于如何处理线程。

并发编程的目的是让程序同时执行多个任务，如果程序是计算密集的，并发编程并没有优势。
反而由于任务的切换使效率降低。
但如果程序是IO密集型的，比如经常读写文件，访问数据库，情况就不一样了。
如果程序有多个执行线程，可以让当前所阻塞的执行线程主动放弃cpu，将执行权转移到其他cpu。
这样就使cpu利用率显著提升。


## 介绍

领导者只有一个，负责监听IO事件。
其他线程都是追随者，休眠在线程池中等待成为新的领导者。当前的领导者如果检测到IO事件，首先需要从线程池中推选出新的
领导者进程，然后处理IO事件。此时，新的领导者等待新的IO事件，而原来的领导者则处理IO事件。这就实现了并发。

## 组件

包括句柄集，线程集，事件处理器和具体的事件处理器。

### 句柄集

用于表示IO资源，在 linux下通常是一个文件描述符。

### 线程集

所有工作线程（包括领导者和追随者）的管理者。
负责各线程之间的同步，以及新领导者线程的推选。
线程在任一时间必然处于一下三种状态之一：

- Leader
- Processing
- follower

### 事件处理器和具体事件处理器

## 缺点