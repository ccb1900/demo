# 一致性哈希算法

## 什么是一致性哈希

- 环
  - 用来表示请求和服务器节点
- 存储位置的数量不是固定的，首尾相连的环，可以认为点是无限的。
- 用户请求使用同样的哈希函数放置到环上
- 每个请求可以被顺时针遍历到的第一个节点服务，可以想象的是，每个节点拥有环上的一段区间
- 假如一个节点挂掉了，也只有该节点的区间受到区间。
- 哈希环，逻辑概念
- 虚拟节点，真实节点经过一定规则的重新哈希。

## 实现方式

源码在 `example/go`，进入`example/go/consistent_hash/hash`执行`go test`。

### 一致性哈希实现

<<< @/example/go/consistent_hash/hash/hash.go

### 哈希接口

可以支持不同的哈希实现

<<< @/example/go/consistent_hash/hash/hash_func.go

### 测试


<<< @/example/go/consistent_hash/hash/hash_test.go

### 实现哈希接口

仅仅实现了md5

<<< @/example/go/consistent_hash/md5/md5.go

### 有序 map 实现

显然环上的节点是有序的。

<<< @/example/go/consistent_hash/sortedmap/sorted_map.go