# protobuf 基础

## 定义 message 类型

我们先来定义一个搜索请求对象

```
syntax = "proto3";

message SearchRequest {
  string query = 1;
  int32 page_number = 2;
  int32 result_per_page = 3;
}
```

- 第一行指定了语法的版本，如果没有该选项，默认使用版本2
- 定义指定了三个字段，也就是键值对，包含名称和类型
- 上面的例子中，所有的字段都是标量类型
- 你也可以为字段指定组合类型，包括枚举类型和其他类型
- 消息中的每个字段都有一个唯一的数字，这些数字是用来在消息二进制格式中标识字段的。如果消息类型已经投入使用就不要再更改这个数字。
- 数字1-15花费一个字节编码，包括数字和字段类型
- 数字16到2047使用两个字节
- 频繁使用的字段最好用1-15，为未来可能添加的频繁使用的字段留出数字。
- 数字最小是1，最大是2的29次方减去1或者 536870911，19000-19999属于保留数字。
- 默认是0或1个，repeated 是大于1
- 一个proto文件可以有多个消息类型
- 支持行注释和块注释

```
message Foo {
  reserved 2, 15, 9 to 11;
  reserved "foo", "bar";
}
```

- 标注为保留字段
- 数字和名称要分别标注

## 标量值类型
## 默认值
## 枚举
## 使用其他消息类型
## 嵌套类型
## 更新消息类型
## 未知字段
## any
## oneof
## 映射
## 包
## 定义服务
## json 映射
## 选项
## 生成你自己的类
